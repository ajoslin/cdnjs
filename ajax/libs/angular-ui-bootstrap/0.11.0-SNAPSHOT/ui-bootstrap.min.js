angular.module("ui.bootstrap",["ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.collapse","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.popover","ui.bootstrap.position","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.tooltip","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var a=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;a&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(e,t,n){return function(e,t,i,a){a.setHeading(n(e,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var a=i[0],r=i[1];r.$render=function(){t.toggleClass(a.activeClass,angular.equals(r.$modelValue,e.$eval(n.btnRadio)))},t.bind(a.toggleEvent,function(){t.hasClass(a.activeClass)||e.$apply(function(){r.$setViewValue(e.$eval(n.btnRadio)),r.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function a(){return o(n.btnCheckboxTrue,!0)}function r(){return o(n.btnCheckboxFalse,!1)}function o(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var l=i[0],s=i[1];s.$render=function(){t.toggleClass(l.activeClass,angular.equals(s.$modelValue,a()))},t.bind(l.toggleEvent,function(){e.$apply(function(){s.$setViewValue(t.hasClass(l.activeClass)?r():a()),s.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(e,t,n){function i(){a();var n=+e.interval;!isNaN(n)&&n>=0&&(o=t(r,n))}function a(){o&&(t.cancel(o),o=null)}function r(){l?(e.next(),i()):e.pause()}var o,l,s=this,c=s.slides=[],u=-1;s.currentSlide=null;var p=!1;s.select=function(a,r){function o(){if(!p){if(s.currentSlide&&angular.isString(r)&&!e.noTransition&&a.$element){a.$element.addClass(r);{a.$element[0].offsetWidth}angular.forEach(c,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(a,{direction:r,active:!0,entering:!0}),angular.extend(s.currentSlide||{},{direction:r,leaving:!0}),e.$currentTransition=n(a.$element,{}),function(t,n){e.$currentTransition.then(function(){l(t,n)},function(){l(t,n)})}(a,s.currentSlide)}else l(a,s.currentSlide);s.currentSlide=a,u=d,i()}}function l(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var d=c.indexOf(a);void 0===r&&(r=d>u?"next":"prev"),a&&a!==s.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){p=!0}),s.indexOfSlide=function(e){return c.indexOf(e)},e.next=function(){var t=(u+1)%c.length;return e.$currentTransition?void 0:s.select(c[t],"next")},e.prev=function(){var t=0>u-1?c.length-1:u-1;return e.$currentTransition?void 0:s.select(c[t],"prev")},e.select=function(e){s.select(e)},e.isActive=function(e){return s.currentSlide===e},e.slides=function(){return c},e.$watch("interval",i),e.$on("$destroy",a),e.play=function(){l||(l=!0,i())},e.pause=function(){e.noPause||(l=!1,a())},s.addSlide=function(t,n){t.$element=n,c.push(t),1===c.length||t.active?(s.select(c[c.length-1]),1==c.length&&e.play()):t.active=!1},s.removeSlide=function(e){var t=c.indexOf(e);c.splice(t,1),c.length>0&&e.active?s.select(t>=c.length?c[t-1]:c[t]):u>t&&u--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,i){function a(t){function i(){c===a&&(c=void 0)}var a=e(n,t);return c&&c.cancel(),c=a,a.then(i,i),a}function r(){u?(u=!1,o()):(n.removeClass("collapse").addClass("collapsing"),a({height:n[0].scrollHeight+"px"}).then(o))}function o(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function l(){if(u)u=!1,s(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});{n[0].offsetWidth}n.removeClass("collapse in").addClass("collapsing"),a({height:0}).then(s)}}function s(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(i.collapse,function(e){e?l():r()})}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(e,t,n,i){function a(t,n){return angular.isDefined(t)?e.$parent.$eval(t):n}function r(e,t){return new Date(e,t,0).getDate()}function o(e,t){for(var n=new Array(t),i=e,a=0;t>a;)n[a++]=new Date(i),i.setDate(i.getDate()+1);return n}function l(e,t,i,a){return{date:e,label:n(e,t),selected:!!i,secondary:!!a}}var s={day:a(t.dayFormat,i.dayFormat),month:a(t.monthFormat,i.monthFormat),year:a(t.yearFormat,i.yearFormat),dayHeader:a(t.dayHeaderFormat,i.dayHeaderFormat),dayTitle:a(t.dayTitleFormat,i.dayTitleFormat),monthTitle:a(t.monthTitleFormat,i.monthTitleFormat)},c=a(t.startingDay,i.startingDay),u=a(t.yearRange,i.yearRange);this.minDate=i.minDate?new Date(i.minDate):null,this.maxDate=i.maxDate?new Date(i.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(e,t){var i=e.getFullYear(),a=e.getMonth(),u=new Date(i,a,1),p=c-u.getDay(),d=p>0?7-p:-p,f=new Date(u),g=0;d>0&&(f.setDate(-d+1),g+=d),g+=r(i,a+1),g+=(7-g%7)%7;for(var m=o(f,g),h=new Array(7),v=0;g>v;v++){var $=m[v];m[v]=l($,s.day,t&&t.getDate()===$.getDate()&&t.getMonth()===$.getMonth()&&t.getFullYear()===$.getFullYear(),$.getMonth()!==a)}for(var b=0;7>b;b++)h[b]=n(m[b].date,s.dayHeader);return{objects:m,title:n(e,s.dayTitle),labels:h}},compare:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(e,t){for(var i=new Array(12),a=e.getFullYear(),r=0;12>r;r++){var o=new Date(a,r,1);i[r]=l(o,s.month,t&&t.getMonth()===r&&t.getFullYear()===a)}return{objects:i,title:n(e,s.monthTitle)}},compare:function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(e,t){for(var n=new Array(u),i=e.getFullYear(),a=parseInt((i-1)/u,10)*u+1,r=0;u>r;r++){var o=new Date(a+r,0,1);n[r]=l(o,s.year,t&&t.getFullYear()===o.getFullYear())}return{objects:n,title:[n[0].label,n[u-1].label].join(" - ")}},compare:function(e,t){return e.getFullYear()-t.getFullYear()},split:5,step:{years:u}}],this.isDisabled=function(t,n){var i=this.modes[n||0];return this.minDate&&i.compare(t,this.minDate)<0||this.maxDate&&i.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:i.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(e,t,n,i){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,a,r,o){function l(){e.showWeekNumbers=0===g&&h}function s(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function c(t){var n=null,a=!0;f.$modelValue&&(n=new Date(f.$modelValue),isNaN(n)?(a=!1,i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):t&&(m=n)),f.$setValidity("date",a);var r=d.modes[g],o=r.getVisibleDates(m,n);angular.forEach(o.objects,function(e){e.disabled=d.isDisabled(e.date,g)}),f.$setValidity("date-disabled",!n||!d.isDisabled(n)),e.rows=s(o.objects,r.split),e.labels=o.labels||[],e.title=o.title}function u(e){g=e,l(),c()}function p(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var d=o[0],f=o[1];if(f){var g=0,m=new Date,h=n.showWeeks;r.showWeeks?e.$parent.$watch(t(r.showWeeks),function(e){h=!!e,l()}):l(),r.min&&e.$parent.$watch(t(r.min),function(e){d.minDate=e?new Date(e):null,c()}),r.max&&e.$parent.$watch(t(r.max),function(e){d.maxDate=e?new Date(e):null,c()}),f.$render=function(){c(!0)},e.select=function(e){if(0===g){var t=f.$modelValue?new Date(f.$modelValue):new Date(0,0,0,0,0,0,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),f.$setViewValue(t),c(!0)}else m=e,u(g-1)},e.move=function(e){var t=d.modes[g].step;m.setMonth(m.getMonth()+e*(t.months||0)),m.setFullYear(m.getFullYear()+e*(t.years||0)),c()},e.toggleMode=function(){u((g+1)%d.modes.length)},e.getWeekNumber=function(t){return 0===g&&e.showWeekNumbers&&7===t.length?p(t[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(e,t,n,i,a,r,o){return{restrict:"EA",require:"ngModel",link:function(l,s,c,u){function p(e){w?w(l,!!e):h.isOpen=!!e}function d(e){if(e){if(angular.isDate(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}function f(e,n,i){e&&(l.$watch(t(e),function(e){h[n]=e}),x.attr(i||n,n))}function g(){h.position=$?i.offset(s):i.position(s),h.position.top=h.position.top+s.prop("offsetHeight")}var m,h=l.$new(),v=angular.isDefined(c.closeOnDateSelection)?l.$eval(c.closeOnDateSelection):r.closeOnDateSelection,$=angular.isDefined(c.datepickerAppendToBody)?l.$eval(c.datepickerAppendToBody):r.appendToBody;c.$observe("datepickerPopup",function(e){m=e||r.dateFormat,u.$render()}),h.showButtonBar=angular.isDefined(c.showButtonBar)?l.$eval(c.showButtonBar):r.showButtonBar,l.$on("$destroy",function(){O.remove(),h.$destroy()}),c.$observe("currentText",function(e){h.currentText=angular.isDefined(e)?e:r.currentText}),c.$observe("toggleWeeksText",function(e){h.toggleWeeksText=angular.isDefined(e)?e:r.toggleWeeksText}),c.$observe("clearText",function(e){h.clearText=angular.isDefined(e)?e:r.clearText}),c.$observe("closeText",function(e){h.closeText=angular.isDefined(e)?e:r.closeText});var b,w;c.isOpen&&(b=t(c.isOpen),w=b.assign,l.$watch(b,function(e){h.isOpen=!!e})),h.isOpen=b?b(l):!1;var y=function(e){h.isOpen&&e.target!==s[0]&&h.$apply(function(){p(!1)})},k=function(){h.$apply(function(){p(!0)})},D=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");D.attr({"ng-model":"date","ng-change":"dateSelection()"});var x=angular.element(D.children()[0]),T={};c.datepickerOptions&&(T=l.$eval(c.datepickerOptions),x.attr(angular.extend({},T))),u.$parsers.unshift(d),h.dateSelection=function(e){angular.isDefined(e)&&(h.date=e),u.$setViewValue(h.date),u.$render(),v&&p(!1)},s.bind("input change keyup",function(){h.$apply(function(){h.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?a(u.$viewValue,m):"";s.val(e),h.date=u.$modelValue},f(c.min,"min"),f(c.max,"max"),c.showWeeks?f(c.showWeeks,"showWeeks","show-weeks"):(h.showWeeks="show-weeks"in T?T["show-weeks"]:o.showWeeks,x.attr("show-weeks","showWeeks")),c.dateDisabled&&x.attr("date-disabled",c.dateDisabled);var C=!1,M=!1;h.$watch("isOpen",function(e){e?(g(),n.bind("click",y),M&&s.unbind("focus",k),s[0].focus(),C=!0):(C&&n.unbind("click",y),s.bind("focus",k),M=!0),w&&w(l,e)}),h.today=function(){h.dateSelection(new Date)},h.clear=function(){h.dateSelection(null)};var O=e(D)(h);$?n.find("body").append(O):s.after(O)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(a){t||(e.bind("click",n),e.bind("keydown",i)),t&&t!==a&&(t.isOpen=!1),t=a},this.close=function(a){t===a&&(t=null,e.unbind("click",n),e.unbind("keydown",i))};var n=function(){t.$apply(function(){t.isOpen=!1})},i=function(e){27===e.which&&n()}}]).controller("DropdownController",["$scope","$attrs","dropdownConfig","dropdownService",function(e,t,n,i){var a=this,r=n.openClass;this.init=function(n){a.$element=n,e.isOpen=angular.isDefined(t.isOpen)?e.$parent.$eval(t.isOpen):!1},this.toggle=function(t){return e.isOpen=arguments.length?!!t:!e.isOpen},e.$watch("isOpen",function(t){a.$element.toggleClass(r,t),t?i.open(e):i.close(e),e.onToggle({open:!!t})}),e.$on("$locationChangeSuccess",function(){e.isOpen=!1})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",scope:{isOpen:"=?",onToggle:"&"},link:function(e,t,n,i){i.init(t)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(e,t,n,i){i&&t.bind("click",function(n){n.preventDefault(),n.stopPropagation(),t.hasClass("disabled")||t.prop("disabled")||e.$apply(function(){i.toggle()})})}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t){t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(n,i,a){n.windowClass=a.windowClass||"",t(function(){n.animate=!0,i[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,a,r){function o(){for(var e=-1,t=f.keys(),n=0;n<t.length;n++)f.get(t[n]).value.backdrop&&(e=n);return e}function l(e){var t=n.find("body").eq(0),i=f.get(e).value;f.remove(e),c(i.modalDomEl,i.modalScope,300,function(){i.modalScope.$destroy(),t.toggleClass(d,f.length()>0),s()})}function s(){if(u&&-1==o()){var e=p;c(u,p,150,function(){e.$destroy(),e=null}),u=void 0,p=void 0}}function c(n,i,a,r){function o(){o.done||(o.done=!0,n.remove(),r&&r())}i.animate=!1;var l=e.transitionEndEventName;if(l){var s=t(o,a);n.bind(l,function(){t.cancel(s),o(),i.$apply()})}else t(o,0)}var u,p,d="modal-open",f=r.createNew(),g={};return a.$watch(o,function(e){p&&(p.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=f.top(),t&&t.value.keyboard&&a.$apply(function(){g.dismiss(t.key)}))}),g.open=function(e,t){f.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var r=n.find("body").eq(0),l=o();l>=0&&!u&&(p=a.$new(!0),p.index=l,u=i("<div modal-backdrop></div>")(p),r.append(u));var s=angular.element("<div modal-window></div>");s.attr("window-class",t.windowClass),s.attr("index",f.length()-1),s.attr("animate","animate"),s.html(t.content);var c=i(s)(t.scope);f.top().value.modalDomEl=c,r.append(c),r.addClass(d)},g.close=function(e,t){var n=f.get(e).value;n&&(n.deferred.resolve(t),l(e))},g.dismiss=function(e,t){var n=f.get(e).value;n&&(n.deferred.reject(t),l(e))},g.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},g.getTop=function(){return f.top()},g}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,a,r,o,l){function s(e){return e.template?i.when(e.template):a.get(e.templateUrl,{cache:r}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var a=i.defer(),r=i.defer(),u={result:a.promise,opened:r.promise,close:function(e){l.close(u,e)},dismiss:function(e){l.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=i.all([s(t)].concat(c(t.resolve)));return p.then(function(e){var i=(t.scope||n).$new();i.$close=u.close,i.$dismiss=u.dismiss;var r,s={},c=1;t.controller&&(s.$scope=i,s.$modalInstance=u,angular.forEach(t.resolve,function(t,n){s[n]=e[c++]}),r=o(t.controller,s)),l.open(u,{scope:i,deferred:a,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,windowClass:t.windowClass})},function(e){a.reject(e)}),p.then(function(){r.resolve(!0)},function(){r.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(e,t,n,i){var a=this,r={$setViewValue:angular.noop},o=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(i,o){r=i,r.$render=function(){a.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){a.itemsPerPage=parseInt(t,10),e.totalPages=a.calculateTotalPages()}):this.itemsPerPage=o},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===e.totalPages},this.isActive=function(e){return this.page===e},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.getAttributeValue=function(t,n,a){return angular.isDefined(t)?a?i(t)(e.$parent):e.$parent.$eval(t):n},this.render=function(){this.page=parseInt(r.$viewValue,10)||1,this.page>0&&this.page<=e.totalPages&&(e.pages=this.getPages(this.page,e.totalPages))},e.selectPage=function(t){!a.isActive(t)&&t>0&&t<=e.totalPages&&(r.$setViewValue(t),r.$render())},e.$watch("page",function(){a.render()}),e.$watch("totalItems",function(){e.totalPages=a.calculateTotalPages()}),e.$watch("totalPages",function(t){o(e.$parent,t),a.page>t?e.selectPage(t):r.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"="},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,a,r){function o(e,t,n,i){return{number:e,text:t,active:n,disabled:i}}var l=r[0],s=r[1];if(s){var c,u=l.getAttributeValue(a.boundaryLinks,t.boundaryLinks),p=l.getAttributeValue(a.directionLinks,t.directionLinks),d=l.getAttributeValue(a.firstText,t.firstText,!0),f=l.getAttributeValue(a.previousText,t.previousText,!0),g=l.getAttributeValue(a.nextText,t.nextText,!0),m=l.getAttributeValue(a.lastText,t.lastText,!0),h=l.getAttributeValue(a.rotate,t.rotate);l.init(s,t.itemsPerPage),a.maxSize&&n.$parent.$watch(e(a.maxSize),function(e){c=parseInt(e,10),l.render()}),l.getPages=function(e,t){var n=[],i=1,a=t,r=angular.isDefined(c)&&t>c;r&&(h?(i=Math.max(e-Math.floor(c/2),1),a=i+c-1,a>t&&(a=t,i=a-c+1)):(i=(Math.ceil(e/c)-1)*c+1,a=Math.min(i+c-1,t)));for(var s=i;a>=s;s++){var v=o(s,s,l.isActive(s),!1);n.push(v)}if(r&&!h){if(i>1){var $=o(i-1,"...",!1,!1);n.unshift($)}if(t>a){var b=o(a+1,"...",!1,!1);n.push(b)}}if(p){var w=o(e-1,f,!1,l.noPrevious());n.unshift(w);var y=o(e+1,g,!1,l.noNext());n.push(y)}if(u){var k=o(1,d,!1,l.noPrevious());n.unshift(k);var D=o(t,m,!1,l.noNext());n.push(D)}return n}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"="},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,a){function r(e,t,n,i,a){return{number:e,text:t,disabled:n,previous:u&&i,next:u&&a}}var o=a[0],l=a[1];if(l){var s=o.getAttributeValue(i.previousText,e.previousText,!0),c=o.getAttributeValue(i.nextText,e.nextText,!0),u=o.getAttributeValue(i.align,e.align);o.init(l,e.itemsPerPage),o.getPages=function(e){return[r(e-1,s,o.noPrevious(),!0,!1),r(e+1,c,o.noNext(),!1,!0)]}}}}}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var a=function(t){for(var n=e[0],a=t.offsetParent||n;a&&a!==n&&i(a);)a=a.offsetParent;return a||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},r=a(t[0]);r!=e[0]&&(i=this.offset(angular.element(r)),i.top+=r.clientTop-r.scrollTop,i.left+=r.clientLeft-r.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].body.scrollTop||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].body.scrollLeft||e[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,a=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],this.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(e,t){e.$element=t,a||e.$element.css({transition:"none"}),this.bars.push(e),e.$watch("value",function(){i.update(e)}),e.$on("$destroy",function(){e.$element=null,i.removeBar(e)})},this.update=function(e){var t=this.getPercentage(e.value);e.$element.css({width:t+"%"})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)},this.getPercentage=function(e){return Math.round(100*e/this.max)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.maxRange=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff,this.init=function(n){i=n,i.$render=this.render,e.range=this.buildTemplateObjects(angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(this.maxRange))},this.buildTemplateObjects=function(e){for(var t={stateOn:this.stateOn,stateOff:this.stateOff},n=0,i=e.length;i>n;n++)e[n]=angular.extend({index:n},t,e[n]);return e},e.rate=function(t){e.readonly||(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.val=t),e.onHover({value:t})},e.reset=function(){e.val=i.$viewValue,e.onLeave()},this.render=function(){e.val=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var a=i[0],r=i[1];r&&a.init(r)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var i=n.indexOf(e);if(e.active&&n.length>1){var a=i==n.length-1?i-1:i+1;t.select(n[a])}n.splice(i,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,a,r){var o,l;a.active?(o=e(a.active),l=o.assign,t.$parent.$watch(o,function(e,n){e!==n&&(t.active=!!e)}),t.active=o(t.$parent)):l=o=angular.noop,t.$watch("active",function(e){l(t.$parent,e),e&&r.select(t)}),t.disabled=!1,a.disabled&&t.$parent.$watch(e(a.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},r.addTab(t),t.$on("$destroy",function(){r.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var a=t.$eval(i.tabContentTransclude);a.$transcludeFn(a.$parent,function(t){angular.forEach(t,function(t){e(t)?a.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,a,r){function o(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===m[1]&&(t+=12)),t):void 0}function l(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function s(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),g.$setViewValue(new Date(f)),p(e)}function u(){g.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var n=f.getHours(),i=f.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:s(n),e.minutes="m"===t?i:s(i),e.meridian=f.getHours()<12?m[0]:m[1]}function d(e){var t=new Date(f.getTime()+6e4*e);f.setHours(t.getHours(),t.getMinutes()),c()}var f=new Date,g={$setViewValue:angular.noop},m=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):r.meridians||a.DATETIME_FORMATS.AMPMS;this.init=function(n,i){g=n,g.$render=this.render;var a=i.eq(0),o=i.eq(1),l=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):r.mousewheel;l&&this.setupMousewheelEvents(a,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?scope.$parent.$eval(t.readonlyInput):r.readonlyInput,this.setupInputEvents(a,o)};var h=r.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){h=parseInt(e,10)});var v=r.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=r.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,g.$error.time){var n=o(),i=l();angular.isDefined(n)&&angular.isDefined(i)&&(f.setHours(n),c())}else p()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()
}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){g.$setViewValue(null),g.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=o();angular.isDefined(e)?(f.setHours(e),c("h")):i(!0)},t.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=s(e.hours)})}),e.updateMinutes=function(){var e=l();angular.isDefined(e)?(f.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=s(e.minutes)})})},this.render=function(){var e=g.$modelValue?new Date(g.$modelValue):null;isNaN(e)?(g.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(f=e),u(),p())},e.incrementHours=function(){d(60*h)},e.decrementHours=function(){d(60*-h)},e.incrementMinutes=function(){d(v)},e.decrementMinutes=function(){d(-v)},e.toggleMeridian=function(){d(720*(f.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var a=i[0],r=i[1];r&&a.init(r,t.find("input"))}}}),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(a,r,o,l,s,c,u){return function(a,p,d){function f(e){var t=e||g.trigger||d,i=n[t]||t;return{show:t,hide:i}}var g=angular.extend({},t,i),m=e(a),h=u.startSymbol(),v=u.endSymbol(),$="<div "+m+'-popup title="'+h+"tt_title"+v+'" content="'+h+"tt_content"+v+'" placement="'+h+"tt_placement"+v+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var e=r($);return function(t,n,i){function r(){t.tt_isOpen?d():u()}function u(){(!x||t.$eval(i[p+"Enable"]))&&(t.tt_popupDelay?(y=o(m,t.tt_popupDelay,!1),y.then(function(e){e()})):m()())}function d(){t.$apply(function(){h()})}function m(){return t.tt_content?(v(),w&&o.cancel(w),b.css({top:0,left:0,display:"block"}),k?s.find("body").append(b):n.after(b),T(),t.tt_isOpen=!0,t.$digest(),T):angular.noop}function h(){t.tt_isOpen=!1,o.cancel(y),t.tt_animation?w=o($,500):$()}function v(){b&&$(),b=e(t,function(){}),t.$digest()}function $(){b&&(b.remove(),b=null)}var b,w,y,k=angular.isDefined(g.appendToBody)?g.appendToBody:!1,D=f(void 0),x=angular.isDefined(i[p+"Enable"]),T=function(){var e,i,a,r;switch(e=k?c.offset(n):c.position(n),i=b.prop("offsetWidth"),a=b.prop("offsetHeight"),t.tt_placement){case"right":r={top:e.top+e.height/2-a/2,left:e.left+e.width};break;case"bottom":r={top:e.top+e.height,left:e.left+e.width/2-i/2};break;case"left":r={top:e.top+e.height/2-a/2,left:e.left-i};break;default:r={top:e.top-a,left:e.left+e.width/2-i/2}}r.top+="px",r.left+="px",b.css(r)};t.tt_isOpen=!1,i.$observe(a,function(e){t.tt_content=e,!e&&t.tt_isOpen&&h()}),i.$observe(p+"Title",function(e){t.tt_title=e}),i.$observe(p+"Placement",function(e){t.tt_placement=angular.isDefined(e)?e:g.placement}),i.$observe(p+"PopupDelay",function(e){var n=parseInt(e,10);t.tt_popupDelay=isNaN(n)?g.popupDelay:n});var C=function(){n.unbind(D.show,u),n.unbind(D.hide,d)};i.$observe(p+"Trigger",function(e){C(),D=f(e),D.show===D.hide?n.bind(D.show,r):(n.bind(D.show,u),n.bind(D.hide,d))});var M=t.$eval(i[p+"Animation"]);t.tt_animation=angular.isDefined(M)?!!M:g.animation,i.$observe(p+"AppendToBody",function(e){k=angular.isDefined(e)?l(e)(t):k}),k&&t.$on("$locationChangeSuccess",function(){t.tt_isOpen&&h()}),t.$on("$destroy",function(){o.cancel(w),o.cancel(y),C(),$()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==r.style[t])return e[t]}var a=function(i,r,o){o=o||{};var l=e.defer(),s=a[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){i.unbind(s,c),l.resolve(i)})};return s&&i.bind(s,c),t(function(){angular.isString(r)?i.addClass(r):angular.isFunction(r)?r(i):angular.isObject(r)&&i.css(r),s||l.resolve(i)}),l.promise.cancel=function(){s&&i.unbind(s,c),l.reject("Transition cancelled")},l.promise},r=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return a.transitionEndEventName=i(o),a.animationEndEventName=i(l),a}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,a,r,o){var l=[9,13,27,38,40];return{require:"ngModel",link:function(s,c,u,p){var d,f=s.$eval(u.typeaheadMinLength)||1,g=s.$eval(u.typeaheadWaitMs)||0,m=s.$eval(u.typeaheadEditable)!==!1,h=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),$=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,b=u.typeaheadAppendToBody?t(u.typeaheadAppendToBody):!1,w=t(u.ngModel).assign,y=o.parse(u.typeahead),k=angular.element("<div typeahead-popup></div>");k.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&k.attr("template-url",u.typeaheadTemplateUrl);var D=s.$new();s.$on("$destroy",function(){D.$destroy()});var x=function(){D.matches=[],D.activeIdx=-1},T=function(e){var t={$viewValue:e};h(s,!0),n.when(y.source(s,t)).then(function(n){if(e===p.$viewValue&&d){if(n.length>0){D.activeIdx=0,D.matches.length=0;for(var i=0;i<n.length;i++)t[y.itemName]=n[i],D.matches.push({label:y.viewMapper(D,t),model:n[i]});D.query=e,D.position=b?r.offset(c):r.position(c),D.position.top=D.position.top+c.prop("offsetHeight")}else x();h(s,!1)}},function(){x(),h(s,!1)})};x(),D.query=void 0;var C;p.$parsers.unshift(function(e){return d=!0,e&&e.length>=f?g>0?(C&&i.cancel(C),C=i(function(){T(e)},g)):T(e):(h(s,!1),x()),m?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,n,i={};return $?(i.$model=e,$(s,i)):(i[y.itemName]=e,t=y.viewMapper(s,i),i[y.itemName]=void 0,n=y.viewMapper(s,i),t!==n?t:e)}),D.select=function(e){var t,n,i={};i[y.itemName]=n=D.matches[e].model,t=y.modelMapper(s,i),w(s,t),p.$setValidity("editable",!0),v(s,{$item:n,$model:t,$label:y.viewMapper(s,i)}),x(),c[0].focus()},c.bind("keydown",function(e){0!==D.matches.length&&-1!==l.indexOf(e.which)&&(e.preventDefault(),40===e.which?(D.activeIdx=(D.activeIdx+1)%D.matches.length,D.$digest()):38===e.which?(D.activeIdx=(D.activeIdx?D.activeIdx:D.matches.length)-1,D.$digest()):13===e.which||9===e.which?D.$apply(function(){D.select(D.activeIdx)}):27===e.which&&(e.stopPropagation(),x(),D.$digest()))}),c.bind("blur",function(){d=!1});var M=function(e){c[0]!==e.target&&(x(),D.$digest())};a.bind("click",M),s.$on("$destroy",function(){a.unbind("click",M)});var O=e(k)(D);b?a.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(a,r,o){var l=i(o.templateUrl)(a.$parent)||"template/typeahead/typeahead-match.html";e.get(l,{cache:t}).success(function(e){r.replaceWith(n(e.trim())(a))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?t.replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}});